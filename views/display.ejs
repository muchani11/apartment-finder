<!DOCTYPE html>
<html lang="en-US">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="/css/styles.css" rel="stylesheet" type="text/css">
      <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <!-- <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li> -->
                <li class="nav-item">
                  <a class="nav-link" href="/favorites.html">Favorites</a>
              </li>

                <li class="nav-item">
                    <a class="nav-link" href="#">Furniture</a>
                </li>
            </ul>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#">Find Roommates</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Contact Us</a>
                </li>
            </ul>
        </div>
    </nav>

    <body>

      <div class="container-display">
        <div class="row">
          <div class="col-lg-12">
            <div class="button-group">
              <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown"><span>Beds</span> <span class="caret"></span></button>
              <ul class="dropdown-menu menu-1">
                <li><a href="#" class="small" data-value="option1-1" tabIndex="-1"><input name="beds" type="checkbox"/>&nbsp;Any</a></li>
                <li><a href="#" class="small" data-value="option2-1" tabIndex="-1"><input name="beds" type="checkbox"/>&nbsp;1</a></li>
                <li><a href="#" class="small" data-value="option3-1" tabIndex="-1"><input name="beds" type="checkbox"/>&nbsp;2</a></li>
                <li><a href="#" class="small" data-value="option4-1" tabIndex="-1"><input name="beds" type="checkbox"/>&nbsp;3</a></li>
                <li><a href="#" class="small" data-value="option5-1" tabIndex="-1"><input name="beds" type="checkbox"/>&nbsp;4</a></li>
                <li><a href="#" class="small" data-value="option6-1" tabIndex="-1"><input name="beds" type="checkbox"/>&nbsp;5</a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <div class="button-group">
              <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown"><span>Baths</span> <span class="caret"></span></button>
              <ul class="dropdown-menu menu-2">
                <li><a href="#" class="small" data-value="option1-2" tabIndex="-1"><input name="baths" type="checkbox"/>&nbsp;Any</a></li>
                <li><a href="#" class="small" data-value="option2-2" tabIndex="-1"><input name="baths" type="checkbox"/>&nbsp;1</a></li>
                <li><a href="#" class="small" data-value="option3-2" tabIndex="-1"><input name="baths" type="checkbox"/>&nbsp;2</a></li>
                <li><a href="#" class="small" data-value="option4-2" tabIndex="-1"><input name="baths" type="checkbox"/>&nbsp;3</a></li>
                <li><a href="#" class="small" data-value="option5-2" tabIndex="-1"><input name="baths" type="checkbox"/>&nbsp;4</a></li>
                <li><a href="#" class="small" data-value="option6-2" tabIndex="-1"><input name="baths" type="checkbox"/>&nbsp;5</a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <div class="button-group">
              <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown"><span>Price</span> <span class="caret"></span></button>
              <ul class="dropdown-menu menu-3">
                <li><a href="#" class="small" data-value="option1-3" tabIndex="-1"><input name="prices" type="checkbox"/>&nbsp;Any</a></li>
                <li><a href="#" class="small" data-value="option2-3" tabIndex="-1"><input name="prices" type="checkbox"/>&nbsp;1</a></li>
                <li><a href="#" class="small" data-value="option3-3" tabIndex="-1"><input name="prices" type="checkbox"/>&nbsp;2</a></li>
                <li><a href="#" class="small" data-value="option4-3" tabIndex="-1"><input name="prices" type="checkbox"/>&nbsp;3</a></li>
                <li><a href="#" class="small" data-value="option5-3" tabIndex="-1"><input name="prices" type="checkbox"/>&nbsp;4</a></li>
                <li><a href="#" class="small" data-value="option6-3" tabIndex="-1"><input name="prices" type="checkbox"/>&nbsp;5</a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <div class="button-group">
              <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown"><span>Size</span> <span class="caret"></span></button>
              <ul class="dropdown-menu menu-4">
                <li><a href="#" class="small" data-value="option1-4" tabIndex="-1"><input name="sizes" type="checkbox"/>&nbsp;Any</a></li>
                <li><a href="#" class="small" data-value="option2-4" tabIndex="-1"><input name="sizes" type="checkbox"/>&nbsp;1</a></li>
                <li><a href="#" class="small" data-value="option3-4" tabIndex="-1"><input name="sizes" type="checkbox"/>&nbsp;2</a></li>
                <li><a href="#" class="small" data-value="option4-4" tabIndex="-1"><input name="sizes" type="checkbox"/>&nbsp;3</a></li>
                <li><a href="#" class="small" data-value="option5-4" tabIndex="-1"><input name="sizes" type="checkbox"/>&nbsp;4</a></li>
                <li><a href="#" class="small" data-value="option6-4" tabIndex="-1"><input name="sizes" type="checkbox"/>&nbsp;5</a></li>
              </ul>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <div class="button-group">
              <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown"><span>Apartment Name</span> <span class="caret"></span></button>
              <ul class="dropdown-menu menu-5">
                <li><a href="#" class="small" data-value="option1-5" tabIndex="-1"><input name="names" type="checkbox"/>&nbsp;Any</a></li>
                <li><a href="#" class="small" data-value="option2-5" tabIndex="-1"><input name="names" type="checkbox"/>&nbsp;21rio</a></li>
                <li><a href="#" class="small" data-value="option3-5" tabIndex="-1"><input name="names" type="checkbox"/>&nbsp;2</a></li>
                <li><a href="#" class="small" data-value="option4-5" tabIndex="-1"><input name="names" type="checkbox"/>&nbsp;3</a></li>
                <li><a href="#" class="small" data-value="option5-5" tabIndex="-1"><input name="names" type="checkbox"/>&nbsp;4</a></li>
                <li><a href="#" class="small" data-value="option6-5" tabIndex="-1"><input name="names" type="checkbox"/>&nbsp;5</a></li>
              </ul>
            </div>
          </div>
        </div>
        <button id="submit" onclick="getData()">Search</button>

        <select name="options-sort" id="sort">
          <option value="beds-sort">Beds (ascending)</option>
          <option value="baths-sort">Baths (ascending)</option>
          <option value="price-sort">Price (ascending)</option>
          <option value="size-sort">Size (ascending)</option>
        </select>

        <button id="init-sort" onclick="sortData()">Sort Items</button>
      </div>
      

      <div class="container-cards">
            <div class="card-deck">
              <% if (data.length === 0) { %>
                <p>No results were found for the specific search.</p>
              <% } %>
              <% for(var i=0; i<data.length; i++) {%>
                <div class="col-md-4">
                    <p class="aptName"><%= data[i].Apartment %></p>
                    <div class="card mb-5" style="min-height:30rem; max-height:30rem;">
                      <div class="icons">
                        <img class="card-img-top" src="<%= data[i].Image %>" alt="<%= data[i].Name %>" onclick="displayFull('<%= data[i].Image %>', '<%= data[i].Name %>')" title="Click to enlarge">
                        <div>
                          <i id="favorite" class="heart fa fa-heart-o" title="Favorite this Unit" name="<%= data[i].Name %>" apt="<%= data[i].Apartment %>" beds="<%= data[i].Beds %>" baths="<%= data[i].Baths%>"
                            data-toggle="modal" data-target="#favoriteModal" data-backdrop="false"></i>
                        </div>
                      </div>
                      <div class="card-body">
                        <h5 class="card-title"><%= data[i].Name %></h5>
                        <% if (data[i].MinPrice === 0) { %>
                          <h6>Price not listed</h6>
                        <% } %>
                        <% if (data[i].MinPrice !== 0 && (data[i].MinPrice === data[i].MaxPrice)) { %>
                          <h6><strong>$<%= data[i].MinPrice.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") %></strong>/mo</h6>
                        <% } %>
                        <% if (data[i].MinPrice !== 0 && (data[i].MinPrice !== data[i].MaxPrice)) { %>
                          <h6>
                            <strong>
                              $<%= data[i].MinPrice.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") %> - 
                              $<%= data[i].MaxPrice.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") %>
                            </strong>/mo
                          </h6>
                        <% } %>
                        <p class="card-text">
                          <% if (data[i].Beds === 0) { %>
                          <strong>Studio</strong> bd &nbsp;|&nbsp; 
                          <% } %>

                          <% if (data[i].Beds !== 0) { %>
                            <strong><%= data[i].Beds %></strong> bd &nbsp;|&nbsp; 
                          <% } %>

                          <strong><%= data[i].Baths %></strong> ba &nbsp;|&nbsp;

                          <% if (data[i].MinSize === 0) { %>
                            <strong>Unlisted</strong> sqft
                          <% } %>

                          <% if (data[i].MinSize !== 0 && data[i].MinSize === data[i].MaxSize) { %>
                            <strong><%= data[i].MinSize.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") %></strong> sqft
                          <% } %>

                          <% if (data[i].MinSize !== 0 && data[i].MinSize !== data[i].MaxSize) { %>
                            <strong>
                              <%= data[i].MinSize.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") %> - 
                              <%= data[i].MaxSize.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") %>
                            </strong> sqft
                          <% } %>
                        </p>
                        
                          <% if(data[i].Waitlist !== 0){ %>
                            <span class="availabilityText" style="background-color:indianred;font-weight: normal;">
                              Waitlist
                           </span>
                         <% } %>
                         <% if(data[i].Waitlist === 0){ %>
                          <span class="availabilityText" style="background-color: rgb(23, 169, 135);font-weight: normal;">
                            ✓ Available
                         </span>
                          <% } %>
                          <span>&nbsp;</span>
                          <% if(data[i].Deposits !== 0){ %>
                            <span class="availabilityText" style="background-color: darkorange;font-weight: normal;">
                              $<%= data[i].Deposits %> Deposit
                          </span>
                        <% } %>

                        <a href="<%= data[i].Link %>" class="btn btn-block btn-primary">View Unit</a>
                      </div>
                    </div>
                  </div>

                  <div id="myModal" class="modal">

                    <!-- The Close Button -->
                    <span class="close" onclick="closeModal()">&times;</span>
                  
                    <!-- Modal Content (The Image) -->
                    <img class="modal-content" id="img01">
                  
                    <!-- Modal Caption (Image Text) -->
                    <div id="caption"><%= data[i].Name %></div>
                  </div>
              <% } %> 
               
              
            </div>
        </div>

      <div class="notice">
        <div id="favoriteModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title"><b>Unit added to favorites</b></h5>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p style="font-size:15px">Visit the favorites page to view this unit. All favorites are saved to browser cookies and local storage.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal">Accept & Close</button>
                    </div>
                </div>
            </div>
        </div>
      </div>


      <div class="display-pagination">
        <div class="pagination">
         <% if (currentPage == 1 && pages > 1) { %> 
          <a href="<%= path %>/<%= parseInt(currentPage) + 1 %>">
            <span>
             Page <%=  parseInt(currentPage) + 1 %>
             <i class="icon ion-ios-arrow-forward"></i>
            </span>
          </a>
        <% } else if (currentPage < pages) { %>
         <a href="<%= path %>/<%= parseInt(currentPage) - 1 %>">
           <span>
             <i class="icon ion-ios-arrow-back"></i>
             Page <%= parseInt(currentPage) - 1 %>
           </span>
         </a>
         <a href="<%= path %>/<%= parseInt(currentPage) + 1 %>">
           <span>
            Page <%= parseInt(currentPage) + 1 %>
            <i class="icon ion-ios-arrow-forward"></i>
           </span>
         </a>
       <% } else if (currentPage == pages && pages > 1) { %>
        <a href="<%= path %>/<%= parseInt(currentPage) - 1 %>">
          <span>
           <i class="icon ion-ios-arrow-back"></i>Page 
           <%=parseInt(currentPage) - 1 %>
          </span>
        </a>
         <% } %>
        </div>
       </div>
    </body>


    <script src="/js/display.js"></script>
    
</html>